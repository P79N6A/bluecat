<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.stylefeng.guns.sharecore.modular.system.dao.ShareTradeInfoModelBySelfMapper" >
  <resultMap id="ordersBaseResultMap" type="com.stylefeng.guns.sharecore.modular.system.model.ShareTradeInfoBySelfModel" >
      <id column="id" property= "id" jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="device_no" property= "deviceNo"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="charger_id"  property= "chargerId" jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="cust_id" property= "custId" jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="yfj_amount" property= "yfjAmount"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="trade_amount" property= "tradeAmount"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="trade_type"  property= "tradeType" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="trade_name"  property= "tradeName" jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="borrow_datetime"  property= "borrowDatetime" jdbcType="TIMESTAMP" javaType="java.util.Date" />
      <result column="back_datetime"  property= "backDatetime" jdbcType="TIMESTAMP" javaType="java.util.Date" />
      <result column="trade_status_name"  property= "tradeStatusName" jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="trade_status"  property= "tradeStatus" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="x_coordinate"  property= "xCoordinate" jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="y_coordinate"  property= "yCoordinate" jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="benefit_status"  property= "benefitStatus" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="benefit_datetime"  property= "benefitDatetime" jdbcType="TIMESTAMP" javaType="java.util.Date" />
      <result column="platform_amount"  property= "platformAmount" jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="agents1_amount"  property= "agents1Amount" jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="agents2_amount"  property= "agents2Amount" jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="agents3_amount"  property= "agents3Amount" jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="shopkeeper_amount"  property= "shopkeeperAmount" jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="alliance_business_amount"  property= "allianceBusinessAmount" jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="back_trade_id"  property= "backTradeId" jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="trade_address"  property= "tradeAddress" jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="trade_zone"  property= "tradeZone" jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="trade_city"  property= "tradeCity" jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="trade_province"  property= "tradeProvince" jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="merchant_id"  property= "merchantId" jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="agents1_id"  property= "agents1Id" jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="agents2_id"  property= "agents2Id" jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="agents3_id"  property= "agents3Id" jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="shopkeeper_id"  property= "shopkeeperId" jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="alliance_business_id"  property= "allianceBusinessId" jdbcType="BIGINT" javaType="java.lang.Long" />
      
      <result column="create_id"  property= "createId" jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="create_datetime"  property= "createDatetime" jdbcType="TIMESTAMP" javaType="java.util.Date" />
      <result column="update_datetime"  property= "updateDatetime" jdbcType="TIMESTAMP" javaType="java.util.Date" />
      <result column="settle_accounts_status"  property= "settleAccountsStatus" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="terminalMerName"  property= "terminalMerName" jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="terminalMerAddr"  property= "terminalMerAddr" jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="terminalPersonName"  property= "terminalPersonName" jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="terminalTelNo"  property= "terminalTelNo" jdbcType="VARCHAR" javaType="java.lang.String" />
      
      <association property="shareTradeDeviceInfoModel" resultMap="ShareTradeDeviceInfoModelResultMap"/>
  </resultMap>
  <resultMap id="ShareTradeDeviceInfoModelResultMap" type="com.stylefeng.guns.sharecore.modular.system.model.ShareTradeDeviceInfoModel">
      <id column="trade_id" property= "tradeId"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="device_id" property= "deviceId"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="device_type_id" property= "deviceTypeId"  jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="device_type_name" property= "deviceTypeName"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="device_status" property= "deviceStatus"  jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="online_datetime" property= "onlineDatetime"  jdbcType="TIMESTAMP" javaType="java.util.Date" />
      <result column="online_merchant_id" property= "onlineMerchantId"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="online_address" property= "onlineAddress"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="online_province" property= "onlineProvince"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="online_x_coordinate" property= "onlineXCoordinate"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="online_y_coordinate" property= "onlineYCoordinate"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="fee_type_id" property= "feeTypeId"  jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="fee_type_name" property= "feeTypeName"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="yfj_amount" property= "yfjAmount"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="first_amount" property= "firstAmount"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="first_minutes" property= "firstMinutes"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="amount_per_hour" property= "amountPerHour"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="amount_max_24hour" property= "amountMax24hour"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="fee1_type_id" property= "fee1TypeId"  jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="fee1_type_name" property= "fee1TypeName"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="fee1_hour_type" property= "fee1HourType"  jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="fee1_hour_amount" property= "fee1HourAmount"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="fee2_type_id" property= "fee2TypeId"  jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="fee2_type_name" property= "fee2TypeName"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="fee2_hour_type" property= "fee2HourType"  jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="fee2_hour_amount" property= "fee2HourAmount"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="fee3_type_id" property= "fee3TypeId"  jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="fee3_type_name" property= "fee3TypeName"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="fee3_hour_type" property= "fee3HourType"  jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="fee3_hour_aount" property= "fee3HourAount"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="platform_rato" property= "platformRato"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="agents1_id" property= "agents1Id"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="agents1_cn" property= "agents1Cn"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="agents1_rato" property= "agents1Rato"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="agents2_id" property= "agents2Id"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="agents2_cn" property= "agents2Cn"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="agents2_rato" property= "agents2Rato"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="agents3_id" property= "agents3Id"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="agents3_rato" property= "agents3Rato"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="agents3_cn" property= "agents3Cn"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="shopkeeper_id" property= "shopkeeperId"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="shopkeeper_cn" property= "shopkeeperCn"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="shopkeeper_rato" property= "shopkeeperRato"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="alliance_business_id" property= "allianceBusinessId"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="alliance_business_cn" property= "allianceBusinessCn"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="alliance_business_rate" property= "allianceBusinessRate"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="trade_yfj_amount" property= "tradeYfjAmount"  jdbcType="DECIMAL" javaType="java.math.BigDecimal" />
      <result column="trade_cust_no" property= "tradeCustNo"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="create_id" property= "createId"  jdbcType="BIGINT" javaType="java.lang.Long" />
      <result column="create_datetime" property= "createDatetime"  jdbcType="TIMESTAMP" javaType="java.util.Date" />
      <result column="update_datetime" property= "updateDatetime"  jdbcType="TIMESTAMP" javaType="java.util.Date" />
      <result column="SQR_url" property= "sqrUrl" jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="remark" property= "remark"  jdbcType="VARCHAR" javaType="java.lang.String" />
      <result column="yfj_reback_type" property= "yfjRebackType"  jdbcType="INTEGER" javaType="java.lang.Integer" />
      <result column="trade_fee_type_id" property= "tradeFeeTypeId"  jdbcType="INTEGER" javaType="java.lang.Integer" />
	</resultMap>
	
	<resultMap id="BaseResultMap" type="com.stylefeng.guns.sharecore.modular.system.model.ShareTradeInfoModel" >
	    <id column="id" property="id" jdbcType="BIGINT" />
	    <result column="device_no" property="deviceNo" jdbcType="BIGINT" />
	    <result column="charger_id" property="chargerId" jdbcType="BIGINT" />
	    <result column="cust_id" property="custId" jdbcType="BIGINT" />
	    <result column="yfj_amount" property="yfjAmount" jdbcType="DECIMAL" />
	    <result column="trade_amount" property="tradeAmount" jdbcType="DECIMAL" />
	    <result column="trade_type" property="tradeType" jdbcType="INTEGER" />
	    <result column="trade_name" property="tradeName" jdbcType="VARCHAR" />
	    <result column="borrow_datetime" property="borrowDatetime" jdbcType="TIMESTAMP" />
	    <result column="use_time_seconds" property="useTimeSeconds" jdbcType="BIGINT" />
	    <result column="back_datetime" property="backDatetime" jdbcType="TIMESTAMP" />
	    <result column="trade_status_name" property="tradeStatusName" jdbcType="VARCHAR" />
	    <result column="trade_status" property="tradeStatus" jdbcType="INTEGER" />
	    <result column="x_coordinate" property="xCoordinate" jdbcType="DECIMAL" />
	    <result column="y_coordinate" property="yCoordinate" jdbcType="DECIMAL" />
	    <result column="benefit_status_name" property="benefitStatusName" jdbcType="VARCHAR" />
	    <result column="benefit_status" property="benefitStatus" jdbcType="INTEGER" />
	    <result column="benefit_datetime" property="benefitDatetime" jdbcType="TIMESTAMP" />
	    <result column="platform_amount" property="platformAmount" jdbcType="DECIMAL" />
	    <result column="agents1_amount" property="agents1Amount" jdbcType="DECIMAL" />
	    <result column="agents2_amount" property="agents2Amount" jdbcType="DECIMAL" />
	    <result column="agents3_amount" property="agents3Amount" jdbcType="DECIMAL" />
	    <result column="shopkeeper_amount" property="shopkeeperAmount" jdbcType="DECIMAL" />
	    <result column="alliance_business_amount" property="allianceBusinessAmount" jdbcType="DECIMAL" />
	    <result column="back_trade_id" property="backTradeId" jdbcType="BIGINT" />
	    <result column="trade_address" property="tradeAddress" jdbcType="VARCHAR" />
	    <result column="trade_zone" property="tradeZone" jdbcType="VARCHAR" />
	    <result column="trade_city" property="tradeCity" jdbcType="VARCHAR" />
	    <result column="trade_province" property="tradeProvince" jdbcType="VARCHAR" />
	    <result column="merchant_id" property="merchantId" jdbcType="BIGINT" />
	    <result column="agents1_id" property="agents1Id" jdbcType="BIGINT" />
	    <result column="agents2_id" property="agents2Id" jdbcType="BIGINT" />
	    <result column="agents3_id" property="agents3Id" jdbcType="BIGINT" />
	    <result column="shopkeeper_id" property="shopkeeperId" jdbcType="BIGINT" />
	    <result column="alliance_business_id" property="allianceBusinessId" jdbcType="BIGINT" />
	    <result column="create_id" property="createId" jdbcType="BIGINT" />
	    <result column="create_datetime" property="createDatetime" jdbcType="TIMESTAMP" />
	    <result column="update_datetime" property="updateDatetime" jdbcType="TIMESTAMP" />
	    <result column="settle_accounts_status" property="settleAccountsStatus" jdbcType="INTEGER" />
	    <result column="remark" property="remark" jdbcType="VARCHAR" />
	    <result column="trade_channel" property="tradeChannel" jdbcType="INTEGER" />
	    <result column="trade_channel_name" property="tradeChannelName" jdbcType="VARCHAR" />
	    <result column="finish_flag" property="finishFlag" jdbcType="INTEGER" />
	    <result column="finish_flag_name" property="finishFlagName" jdbcType="VARCHAR" />
	    <result column="plat_form_refund" property="platFormRefund" jdbcType="INTEGER" />
	    <result column="refund_amount" property="refundAmount" jdbcType="DECIMAL" />
	    <result column="cal_trade_amount" property="calTradeAmount" jdbcType="DECIMAL" />
	    <result column="resource_trade_id" property="resourceTradeId" jdbcType="BIGINT" />
	  </resultMap>
		
	  <sql id="Base_Column_List" >
	    id, device_no, charger_id, cust_id, yfj_amount, trade_amount, trade_type, trade_name, 
	    borrow_datetime, use_time_seconds, back_datetime, trade_status_name, trade_status, 
	    x_coordinate, y_coordinate, benefit_status_name, benefit_status, benefit_datetime, 
	    platform_amount, agents1_amount, agents2_amount, agents3_amount, shopkeeper_amount, 
	    alliance_business_amount, back_trade_id, trade_address, trade_zone, trade_city, trade_province, 
	    merchant_id, agents1_id, agents2_id, agents3_id, shopkeeper_id, alliance_business_id, 
	    create_id, create_datetime, update_datetime, settle_accounts_status, remark, trade_channel, 
	    trade_channel_name, finish_flag, finish_flag_name, plat_form_refund, refund_amount, 
	    cal_trade_amount, resource_trade_id
	  </sql>
	  <select id="getShareTradeInfoModelByIdForUpdate" parameterType="java.lang.Long"  resultMap="BaseResultMap" >
	    select id, 
	    	trade_status,
	    	benefit_status	    
	    from share_trade_info
	    where id = #{id,jdbcType=BIGINT}
    	for update
	  </select>
	  
	<resultMap id="selectByConditionForPageBaseResultMap" type="com.stylefeng.guns.sharecore.modular.system.model.ShareTradeInfoModelSearchBO" >
	    <id column="id" property="id" jdbcType="BIGINT" />
	    <result column="device_no" property="deviceNo" jdbcType="BIGINT" />
	    <result column="charger_id" property="chargerId" jdbcType="BIGINT" />
	    <result column="cust_id" property="custId" jdbcType="BIGINT" />
	    <result column="yfj_amount" property="yfjAmount" jdbcType="DECIMAL" />
	    <result column="trade_amount" property="tradeAmount" jdbcType="DECIMAL" />
	    <result column="trade_type" property="tradeType" jdbcType="INTEGER" />
	    <result column="trade_name" property="tradeName" jdbcType="VARCHAR" />
	    <result column="borrow_datetime" property="borrowDatetime" jdbcType="TIMESTAMP" />
	    <result column="use_time_seconds" property="useTimeSeconds" jdbcType="BIGINT" />
	    <result column="back_datetime" property="backDatetime" jdbcType="TIMESTAMP" />
	    <result column="trade_status_name" property="tradeStatusName" jdbcType="VARCHAR" />
	    <result column="trade_status" property="tradeStatus" jdbcType="INTEGER" />
	    <result column="x_coordinate" property="xCoordinate" jdbcType="DECIMAL" />
	    <result column="y_coordinate" property="yCoordinate" jdbcType="DECIMAL" />
	    <result column="benefit_status_name" property="benefitStatusName" jdbcType="VARCHAR" />
	    <result column="benefit_status" property="benefitStatus" jdbcType="INTEGER" />
	    <result column="benefit_datetime" property="benefitDatetime" jdbcType="TIMESTAMP" />
	    <result column="platform_amount" property="platformAmount" jdbcType="DECIMAL" />
	    <result column="agents1_amount" property="agents1Amount" jdbcType="DECIMAL" />
	    <result column="agents2_amount" property="agents2Amount" jdbcType="DECIMAL" />
	    <result column="agents3_amount" property="agents3Amount" jdbcType="DECIMAL" />
	    <result column="shopkeeper_amount" property="shopkeeperAmount" jdbcType="DECIMAL" />
	    <result column="alliance_business_amount" property="allianceBusinessAmount" jdbcType="DECIMAL" />
	    <result column="back_trade_id" property="backTradeId" jdbcType="BIGINT" />
	    <result column="trade_address" property="tradeAddress" jdbcType="VARCHAR" />
	    <result column="trade_zone" property="tradeZone" jdbcType="VARCHAR" />
	    <result column="trade_city" property="tradeCity" jdbcType="VARCHAR" />
	    <result column="trade_province" property="tradeProvince" jdbcType="VARCHAR" />
	    <result column="merchant_id" property="merchantId" jdbcType="BIGINT" />
	    <result column="agents1_id" property="agents1Id" jdbcType="BIGINT" />
	    <result column="agents2_id" property="agents2Id" jdbcType="BIGINT" />
	    <result column="agents3_id" property="agents3Id" jdbcType="BIGINT" />
	    <result column="shopkeeper_id" property="shopkeeperId" jdbcType="BIGINT" />
	    <result column="alliance_business_id" property="allianceBusinessId" jdbcType="BIGINT" />
	    <result column="create_id" property="createId" jdbcType="BIGINT" />
	    <result column="create_datetime" property="createDatetime" jdbcType="TIMESTAMP" />
	    <result column="update_datetime" property="updateDatetime" jdbcType="TIMESTAMP" />
	    <result column="settle_accounts_status" property="settleAccountsStatus" jdbcType="INTEGER" />
	    <result column="remark" property="remark" jdbcType="VARCHAR" />
	    <result column="trade_channel" property="tradeChannel" jdbcType="INTEGER" />
	    <result column="trade_channel_name" property="tradeChannelName" jdbcType="VARCHAR" />
	    <result column="finish_flag" property="finishFlag" jdbcType="INTEGER" />
	    <result column="finish_flag_name" property="finishFlagName" jdbcType="VARCHAR" />
	    <result column="plat_form_refund" property="platFormRefund" jdbcType="INTEGER" />
	    <result column="refund_amount" property="refundAmount" jdbcType="DECIMAL" />
	    <result column="cal_trade_amount" property="calTradeAmount" jdbcType="DECIMAL" />
	    <result column="resource_trade_id" property="resourceTradeId" jdbcType="BIGINT" />
	    
	    <result column="merchantName" property="merchantName" jdbcType="VARCHAR" />
	    <result column="merchantAddr" property="merchantAddr" jdbcType="VARCHAR" />
	    <result column="merchantPersonName" property="merchantPersonName" jdbcType="VARCHAR" />
	    <result column="merchantTelNo" property="merchantTelNo" jdbcType="VARCHAR" />
	    
	    <result column="agents1Name" property="agents1Name" jdbcType="VARCHAR" />
	    <result column="agents1Addr" property="agents1Addr" jdbcType="VARCHAR" />
	    <result column="agents1PersonName" property="agents1PersonName" jdbcType="VARCHAR" />
	    <result column="agents1TelNo" property="agents1TelNo" jdbcType="VARCHAR" />
	    
	    <result column="agents2Name" property="agents2Name" jdbcType="VARCHAR" />
	    <result column="agents2Addr" property="agents2Addr" jdbcType="VARCHAR" />
	    <result column="agents2PersonName" property="agents2PersonName" jdbcType="VARCHAR" />
	    <result column="agents2TelNo" property="agents2TelNo" jdbcType="VARCHAR" />
	    
	    <result column="agents3Name" property="agents3Name" jdbcType="VARCHAR" />
	    <result column="agents3Addr" property="agents3Addr" jdbcType="VARCHAR" />
	    <result column="agents3PersonName" property="agents3PersonName" jdbcType="VARCHAR" />
	    <result column="agents3TelNo" property="agents3TelNo" jdbcType="VARCHAR" />
	    
	    <result column="shopkeeperName" property="shopkeeperName" jdbcType="VARCHAR" />
	    <result column="shopkeeperAddr" property="shopkeeperAddr" jdbcType="VARCHAR" />
	    <result column="shopkeeperPersonName" property="shopkeeperPersonName" jdbcType="VARCHAR" />
	    <result column="shopkeeperTelNo" property="shopkeeperTelNo" jdbcType="VARCHAR" />
	    
	    <result column="allianceBussinessName" property="allianceBussinessName" jdbcType="VARCHAR" />
	    <result column="allianceBussinessAddr" property="allianceBussinessAddr" jdbcType="VARCHAR" />
	    <result column="allianceBussinessPersonName" property="allianceBussinessPersonName" jdbcType="VARCHAR" />
	    <result column="allianceBussinessTelNo" property="allianceBussinessTelNo" jdbcType="VARCHAR" />
	    
	    <result column="nick_name" property="nickName" jdbcType="VARCHAR" />
	    <result column="headImgUrl" property="headImgUrl" jdbcType="VARCHAR" />
	    <result column="city" property="city" jdbcType="VARCHAR" />	    
	  </resultMap>
	  
	  <select id="queryCurrentCountByDeviceId" parameterType="java.lang.Long"  resultType="java.lang.Integer" >
	      SELECT count(id) FROM share_trade_info WHERE 1=1
	      
	      <if test="deviceId !=null">
			and device_no=#{deviceId,jdbcType=BIGINT}
		  </if>
	      AND borrow_datetime > CONCAT(CURDATE(),' 00:00:00');
	      
	  </select>
	  <select id="selectByConditionForPage"  parameterType="java.util.HashMap"  resultMap="selectByConditionForPageBaseResultMap">  
		SELECT 
			trade.id, trade.device_no, trade.charger_id, trade.cust_id, trade.yfj_amount, trade.trade_amount, trade.trade_type, trade.trade_name, 
			trade.borrow_datetime, trade.use_time_seconds, trade.back_datetime, trade.trade_status_name, trade.trade_status, 
			trade.x_coordinate, trade.y_coordinate, trade.benefit_status_name, trade.benefit_status, trade.benefit_datetime, 
			trade.platform_amount, trade.agents1_amount, trade.agents2_amount, trade.agents3_amount, trade.shopkeeper_amount, 
			trade.alliance_business_amount, trade.back_trade_id, trade.trade_address, trade.trade_zone, trade.trade_city, trade.trade_province, 
			trade.merchant_id, trade.agents1_id, trade.agents2_id, trade.agents3_id, trade.shopkeeper_id, trade.alliance_business_id, 
			trade.create_id, trade.create_datetime, trade.update_datetime, trade.settle_accounts_status, trade.remark, trade.trade_channel, 
			trade.trade_channel_name, trade.finish_flag, trade.finish_flag_name, trade.plat_form_refund, trade.refund_amount, 
			trade.cal_trade_amount, trade.resource_trade_id,
			
			merForMer.`name` AS merchantName,merForMer.`addr` AS merchantAddr, merForMer.`person_name` AS merchantPersonName, merForMer.`tel_no` AS merchantTelNo,
			merForAgents1.`name` AS agents1Name, merForAgents1.addr AS agents1Addr,merForAgents1.person_name AS agents1PersonName,merForAgents1.tel_no AS agents1TelNo,
			merForAgents2.`name` AS agents2Name, merForAgents2.addr AS agents2Addr,merForAgents2.person_name AS agents2PersonName,merForAgents2.tel_no AS agents2TelNo,
			merForAgents3.`name` AS agents3Name, merForAgents3.addr AS agents2Addr,merForAgents3.person_name AS agents3PersonName,merForAgents3.tel_no AS agents3TelNo,
			merForShopkeeper.`name` AS shopkeeperName, merForShopkeeper.addr AS shopkeeperAddr,merForShopkeeper.person_name AS shopkeeperPersonName,merForShopkeeper.tel_no AS shopkeeperTelNo,
			merForAllianceBusiness.`name` AS allianceBussinessName, merForAllianceBusiness.addr AS allianceBussinessAddr,merForAllianceBusiness.person_name AS allianceBussinessPersonName,merForAllianceBusiness.tel_no AS allianceBussinessTelNo,
			custTab.`nick_name`,custTab.`headImgUrl`,custTab.`city`
		FROM share_trade_info trade
		LEFT JOIN merchant_info merForMer ON merForMer.`id`=trade.`merchant_id`  AND merForMer.`merchant_type`=10
		LEFT JOIN merchant_info merForAgents1 ON merForAgents1.`id`=trade.`agents1_id`  AND merForAgents1.`merchant_type`=11
		LEFT JOIN merchant_info merForAgents2 ON merForAgents2.`id`=trade.`agents2_id`  AND merForAgents2.`merchant_type`=12
		LEFT JOIN merchant_info merForAgents3 ON merForAgents3.`id`=trade.`agents3_id`  AND merForAgents3.`merchant_type`=13
		LEFT JOIN merchant_info merForShopkeeper ON merForShopkeeper.`id`=trade.`shopkeeper_id`  AND merForShopkeeper.`merchant_type`=14
		LEFT JOIN merchant_info merForAllianceBusiness ON merForAllianceBusiness.`id`=trade.`alliance_business_id`  AND merForAllianceBusiness.`merchant_type`=15
		LEFT JOIN cust_info custTab ON custTab.cust_no=trade.cust_id
		where 1=1 
		<if test="id !=null">
			and trade.Id=#{id,jdbcType=BIGINT}
		</if>
		<if test="deviceId !=null">
			and trade.device_no=#{deviceId,jdbcType=BIGINT}
		</if>		
		<if test="startDeviceNo !=null">
		    <![CDATA[ 
				and trade.device_no>=#{startDeviceNo,jdbcType=BIGINT}
			]]>
		</if>
		<if test="endDeviceNo !=null">
			<![CDATA[ 
				and trade.device_no<=#{endDeviceNo,jdbcType=BIGINT}
			]]>
		</if>		
		<if test="chargerId !=null">
			and trade.charger_id=#{chargerId,jdbcType=BIGINT}
		</if>
		<if test="custNo !=null">
			and trade.cust_id=#{custNo,jdbcType=BIGINT}
		</if>
		<if test="merchantId !=null">
			and trade.merchant_id=#{merchantId,jdbcType=BIGINT}
		</if>
		<if test="agents1Id !=null">
			and trade.agents1_id=#{agents1Id,jdbcType=BIGINT}
		</if>
		<if test="agents2Id !=null">
			and trade.agents2_id=#{agents2Id,jdbcType=BIGINT}
		</if>
		<if test="agents3Id !=null">
			and trade.agents3_id=#{agents3Id,jdbcType=BIGINT}
		</if>
		<if test="shopkeeperId !=null">
			and trade.shopkeeper_id=#{shopkeeperId,jdbcType=BIGINT}
		</if>
		<if test="allianceBusinessId !=null">
			and trade.alliance_business_id=#{allianceBusinessId,jdbcType=BIGINT}
		</if>
		<if test="noRight !=null">
			<![CDATA[ 
			and 1<>1
		   	]]>
		</if>		
		<if test="borrowTimeStart !=null">
			<![CDATA[ 
			and trade.borrow_datetime>=#{borrowTimeStart,jdbcType=TIMESTAMP}
		   	]]>
		</if>
		<if test="borrowTimeEnd !=null">
			<![CDATA[ 
			and trade.borrow_datetime<=#{borrowTimeEnd,jdbcType=TIMESTAMP}
		   	]]>
		</if>
		<if test="backTimeStart !=null">
			<![CDATA[ 
			and trade.back_datetime>=#{backTimeStart,jdbcType=TIMESTAMP}
		   	]]>
		</if>
		<if test="backTimeEnd !=null">
			<![CDATA[ 
			and trade.back_datetime<=#{backTimeEnd,jdbcType=TIMESTAMP}
		   	]]>
		</if>
		<if test="merchant != null and merchant !='' " >
	        and merForMer.`name` like  CONCAT('%',#{merchant},'%')
	    </if>
		<if test="agents1 != null and agents1 !='' " >
	        and merForAgents1.`name` like CONCAT('%',#{agents1},'%')
	    </if>
		<if test="agents2 != null and agents2 !='' " >
	        and merForAgents2.`name`  CONCAT('%',#{agents2},'%')
	    </if>
		<if test="agents3 != null and agents3 !='' " >
	        and merForAgents3.`name` like CONCAT('%',#{agents3},'%')
	    </if>
		<if test="shopkeeper != null and shopkeeper !='' " >
	        and merForShopkeeper.`name`like CONCAT('%',#{shopkeeper},'%')
	    </if>	
		<if test="allianceBusiness != null and allianceBusiness !='' " >
	        and merForAllianceBusiness.`name` like CONCAT('%',#{allianceBusiness},'%')
	    </if>
		<if test="filter !=null">
			<![CDATA[ 
			 ${filter}
		   	]]>
		</if>
		<if test="order != null">
			<![CDATA[ 
			order by ${order}
		   	]]>
		</if>
		<if test="limit != null">
			<![CDATA[ 
			LIMIT #{offset,jdbcType=BIGINT},#{limit,jdbcType=BIGINT}
		   	]]>
		</if>
	  </select>
	  <resultMap id="BaseResultMapForcountByConditionForPage" type="com.stylefeng.guns.sharecore.modular.system.model.TotalModel" >
	    <result column="total" property="total" jdbcType="BIGINT" />
	    <result column="totalAmount" property="totalAmount" jdbcType="DECIMAL" />
	    <result column="totalYFJAmount" property="totalYFJAmount" jdbcType="DECIMAL" />
	    <result column="totalPlatFormAmount" property="totalPlatFormAmount" jdbcType="DECIMAL" />
	    <result column="totalAgents1Amount" property="totalAgents1Amount" jdbcType="DECIMAL" />
	    <result column="totalAgents2Amount" property="totalAgents2Amount" jdbcType="DECIMAL" />
	    <result column="totalAgents3Amount" property="totalAgents3Amount" jdbcType="DECIMAL" />
	    <result column="totalAllianceBusinessAmount" property="totalAllianceBusinessAmount" jdbcType="DECIMAL" />
	    <result column="totalShopkeeperAmount" property="totalShopkeeperAmount" jdbcType="DECIMAL" />
	  </resultMap>
	  <select id="countByConditionForPage"  parameterType="java.util.HashMap"  resultMap="BaseResultMapForcountByConditionForPage" >
		   SELECT 
			 	COUNT(trade.Id) AS total,
				SUM(trade.`trade_amount`) AS totalAmount,
				SUM(trade.`yfj_amount`) AS totalYFJAmount,
				SUM(trade.`platform_amount`) AS totalPlatFormAmount,
				SUM(trade.`agents1_amount`) AS totalAgents1Amount,
				SUM(trade.`agents2_amount`) AS totalAgents2Amount,
				SUM(trade.`agents3_amount`) AS totalAgents3Amount,
				SUM(trade.`alliance_business_amount`) AS totalAllianceBusinessAmount,
				SUM(trade.`shopkeeper_amount`) AS totalShopkeeperAmount	
			FROM `share_trade_info` trade
			LEFT JOIN merchant_info merForMer ON merForMer.`id`=trade.`merchant_id`  AND merForMer.`merchant_type`=10
			LEFT JOIN merchant_info merForAgents1 ON merForAgents1.`id`=trade.`agents1_id`  AND merForAgents1.`merchant_type`=11
			LEFT JOIN merchant_info merForAgents2 ON merForAgents2.`id`=trade.`agents2_id`  AND merForAgents2.`merchant_type`=12
			LEFT JOIN merchant_info merForAgents3 ON merForAgents3.`id`=trade.`agents3_id`  AND merForAgents3.`merchant_type`=13
			LEFT JOIN merchant_info merForShopkeeper ON merForShopkeeper.`id`=trade.`shopkeeper_id`  AND merForShopkeeper.`merchant_type`=14
			LEFT JOIN merchant_info merForAllianceBusiness ON merForAllianceBusiness.`id`=trade.`alliance_business_id`  AND merForAllianceBusiness.`merchant_type`=15
			where 1=1
			<if test="id !=null">
				and trade.Id=#{id,jdbcType=BIGINT}
			</if>
			<if test="deviceId !=null">
				and trade.device_no=#{deviceId,jdbcType=BIGINT}
			</if>		
			<if test="startDeviceNo !=null">
			    <![CDATA[ 
					and trade.device_no>=#{startDeviceNo,jdbcType=BIGINT}
				]]>
			</if>
			<if test="endDeviceNo !=null">
				<![CDATA[ 
					and trade.device_no<=#{endDeviceNo,jdbcType=BIGINT}
				]]>
			</if>	
			<if test="chargerId !=null">
				and trade.charger_id=#{chargerId,jdbcType=BIGINT}
			</if>
			<if test="custNo !=null">
				and trade.cust_id=#{custNo,jdbcType=BIGINT}
			</if>
			<if test="merchantId !=null">
				and trade.merchant_id=#{merchantId,jdbcType=BIGINT}
			</if>
			<if test="agents1Id !=null">
				and trade.agents1_id=#{agents1Id,jdbcType=BIGINT}
			</if>
			<if test="agents2Id !=null">
				and trade.agents2_id=#{agents2Id,jdbcType=BIGINT}
			</if>
			<if test="agents3Id !=null">
				and trade.agents3_id=#{agents3Id,jdbcType=BIGINT}
			</if>
			<if test="shopkeeperId !=null">
				and trade.shopkeeper_id=#{shopkeeperId,jdbcType=BIGINT}
			</if>
			<if test="allianceBusinessId !=null">
				and trade.alliance_business_id=#{allianceBusinessId,jdbcType=BIGINT}
			</if>
			<if test="borrowTimeStart !=null">
				<![CDATA[ 
				and trade.borrow_datetime>=#{borrowTimeStart,jdbcType=TIMESTAMP}
			   	]]>
			</if>
			<if test="borrowTimeEnd !=null">
				<![CDATA[ 
				and trade.borrow_datetime<#{borrowTimeEnd,jdbcType=TIMESTAMP}
			   	]]>
			</if>
			<if test="backTimeStart !=null">
				<![CDATA[ 
				and trade.back_datetime>=#{backTimeStart,jdbcType=TIMESTAMP}
			   	]]>
			</if>
			<if test="backTimeEnd !=null">
				<![CDATA[ 
				and trade.back_datetime<#{backTimeEnd,jdbcType=TIMESTAMP}
			   	]]>
			</if>
			<if test="borrowTimeStart !=null">
			<![CDATA[ 
			and trade.borrow_datetime>=#{borrowTimeStart,jdbcType=TIMESTAMP}
		   	]]>
			</if>
			<if test="borrowTimeEnd !=null">
				<![CDATA[ 
				and trade.borrow_datetime<#{borrowTimeEnd,jdbcType=TIMESTAMP}
			   	]]>
			</if>
			<if test="backTimeStart !=null">
				<![CDATA[ 
				and trade.back_datetime>=#{backTimeStart,jdbcType=TIMESTAMP}
			   	]]>
			</if>
			<if test="backTimeEnd !=null">
				<![CDATA[ 
				and trade.back_datetime<#{backTimeEnd,jdbcType=TIMESTAMP}
			   	]]>
			</if>
			<if test="merchant != null and merchant !='' " >
		        and merForMer.`name` like  CONCAT('%',#{merchant},'%')
		    </if>
			<if test="agents1 != null and agents1 !='' " >
		        and merForAgents1.`name` like CONCAT('%',#{agents1},'%')
		    </if>
			<if test="agents2 != null and agents2 !='' " >
		        and merForAgents2.`name`  CONCAT('%',#{agents2},'%')
		    </if>
			<if test="agents3 != null and agents3 !='' " >
		        and merForAgents3.`name` like CONCAT('%',#{agents3},'%')
		    </if>
			<if test="shopkeeper != null and shopkeeper !='' " >
		        and merForShopkeeper.`name`like CONCAT('%',#{shopkeeper},'%')
		    </if>	
			<if test="allianceBusiness != null and allianceBusiness !='' " >
		        and merForAllianceBusiness.`name` like CONCAT('%',#{allianceBusiness},'%')
		    </if>	
			<if test="noRight !=null">
				<![CDATA[ 
				and 1<>1
			   	]]>
			</if>
			<if test="filter !=null">
				<![CDATA[ 
				 ${filter}
			   	]]>
			</if>
	  </select>
		
	  <select id="selectOrderCountByCustNo" parameterType="java.lang.Long"  resultType="java.lang.Long" >
	    select count(Id) from share_trade_info
	    where cust_id = #{custNo,jdbcType=BIGINT}
	  </select>
	  <select id="selectUnfinishedOrderCountByCustNo" resultType="java.lang.Long" >
	    select count(Id) from share_trade_info
	    where cust_id = #{custNo,jdbcType=BIGINT} and trade_status=#{status,jdbcType=TINYINT}
	  </select>
	  
	  <select id="selectOrdersForPageByFilter" parameterType="java.util.HashMap" resultMap="ordersBaseResultMap">
	  SELECT tradeInfoTab.id, 
			tradeInfoTab.device_no, 
			tradeInfoTab.charger_id, 
			tradeInfoTab.cust_id, 
			tradeInfoTab.yfj_amount, 
			tradeInfoTab.trade_amount, 
			tradeInfoTab.trade_type, 
			tradeInfoTab.trade_name, 
			tradeInfoTab.borrow_datetime, 
			tradeInfoTab.back_datetime, 
			tradeInfoTab.trade_status_name, 
			tradeInfoTab.trade_status, 
			tradeInfoTab.x_coordinate, 
			tradeInfoTab.y_coordinate, 
			tradeInfoTab.benefit_status, 
			tradeInfoTab.benefit_datetime, 
			tradeInfoTab.platform_amount, 
			tradeInfoTab.agents1_amount, 
			tradeInfoTab.agents2_amount, 
			tradeInfoTab.agents3_amount, 
			tradeInfoTab.shopkeeper_amount, 
			tradeInfoTab.alliance_business_amount, 
			tradeInfoTab.back_trade_id, 
			tradeInfoTab.trade_address, 
			tradeInfoTab.trade_zone, 
			tradeInfoTab.trade_city, 
			tradeInfoTab.trade_province, 
			tradeInfoTab.merchant_id, 
			tradeInfoTab.agents1_id, 
			tradeInfoTab.agents2_id, 
			tradeInfoTab.agents3_id, 
			tradeInfoTab.shopkeeper_id, 
			tradeInfoTab.alliance_business_id, 
			tradeInfoTab.create_id, 
			tradeInfoTab.create_datetime, 
			tradeInfoTab.update_datetime, 
			tradeInfoTab.settle_accounts_status,
			
			deviceInfoTab.trade_id, 
			deviceInfoTab.device_id, 
			deviceInfoTab.device_type_id, 
			deviceInfoTab.device_type_name, 
			deviceInfoTab.device_status, 
			deviceInfoTab.online_datetime, 
			deviceInfoTab.online_merchant_id, 
			deviceInfoTab.online_address, 
			deviceInfoTab.online_province, 
			deviceInfoTab.online_x_coordinate, 
			deviceInfoTab.online_y_coordinate, 
			deviceInfoTab.fee_type_id, 
			deviceInfoTab.fee_type_name, 
			deviceInfoTab.yfj_amount, 
			deviceInfoTab.first_amount, 
			deviceInfoTab.first_minutes, 
			deviceInfoTab.amount_per_hour, 
			deviceInfoTab.amount_max_24hour, 
			deviceInfoTab.fee1_type_id, 
			deviceInfoTab.fee1_type_name, 
			deviceInfoTab.fee1_hour_type, 
			deviceInfoTab.fee1_hour_amount, 
			deviceInfoTab.fee2_type_id, 
			deviceInfoTab.fee2_type_name, 
			deviceInfoTab.fee2_hour_type, 
			deviceInfoTab.fee2_hour_amount, 
			deviceInfoTab.fee3_type_id, 
			deviceInfoTab.fee3_type_name, 
			deviceInfoTab.fee3_hour_type, 
			deviceInfoTab.fee3_hour_aount, 
			deviceInfoTab.platform_rato, 
			deviceInfoTab.agents1_cn, 
			deviceInfoTab.agents1_rato,
			deviceInfoTab.agents2_cn, 
			deviceInfoTab.agents2_rato, 
			deviceInfoTab.agents3_rato, 
			deviceInfoTab.agents3_cn, 
			deviceInfoTab.shopkeeper_cn, 
			deviceInfoTab.shopkeeper_rato, 
			deviceInfoTab.alliance_business_cn, 
			deviceInfoTab.alliance_business_rate, 
			deviceInfoTab.trade_yfj_amount, 
			deviceInfoTab.trade_cust_no, 
			deviceInfoTab.SQR_url, 
			deviceInfoTab.remark, 
			deviceInfoTab.yfj_reback_type, 
			deviceInfoTab.trade_fee_type_id,
			tradeInfoTab.`merchant_id`,
			
			merchantInfoTab.`name` AS terminalMerName,
			merchantInfoTab.`addr` AS terminalMerAddr,
			merchantInfoTab.`person_name` AS terminalPersonName,
			merchantInfoTab.`tel_no` AS terminalTelNo
		FROM `share_trade_info` AS tradeInfoTab
		JOIN `share_trade_device_info` AS deviceInfoTab ON tradeInfoTab.`id`=deviceInfoTab.`trade_id`
		LEFT JOIN `merchant_info` AS merchantInfoTab ON merchantInfoTab.`id`=tradeInfoTab.`merchant_id`
        WHERE tradeInfoTab.trade_status IN
		<foreach collection="tradeStatus" index="index" item="status" open="(" separator="," close=")">
			#{status}
		</foreach>
		AND tradeInfoTab.cust_id = #{custNo,jdbcType=BIGINT} 
		<if test="beginDateTime != null">
			<![CDATA[ 
			    and str_to_date(CONCAT(#{beginDateTime},' 00:00:00'),'%Y-%m-%d %H:%i:%s') <= tradeInfoTab.create_datetime
	    	]]>
		</if>
		<if test="endDateTime != null">
			<![CDATA[ 
			and STR_TO_DATE(CONCAT(#{endDateTime},' 23:59:59'),'%Y-%m-%d %H:%i:%s') >= tradeInfoTab.create_datetime
	    	]]>
		</if>
        ORDER BY tradeInfoTab.create_datetime DESC
        LIMIT #{start,jdbcType=INTEGER},#{rows,jdbcType=INTEGER}
  </select>  
  
  <select id="selectMerchantOrdersForPageByFilter" parameterType="java.util.HashMap" resultMap="ordersBaseResultMap">
	  SELECT tradeInfoTab.id, 
			tradeInfoTab.device_no, 
			tradeInfoTab.charger_id, 
			tradeInfoTab.cust_id, 
			tradeInfoTab.yfj_amount, 
			tradeInfoTab.trade_amount, 
			tradeInfoTab.trade_type, 
			tradeInfoTab.trade_name, 
			tradeInfoTab.borrow_datetime, 
			tradeInfoTab.back_datetime, 
			tradeInfoTab.trade_status_name, 
			tradeInfoTab.trade_status, 
			tradeInfoTab.x_coordinate, 
			tradeInfoTab.y_coordinate, 
			tradeInfoTab.benefit_status, 
			tradeInfoTab.benefit_datetime, 
			tradeInfoTab.platform_amount, 
			tradeInfoTab.agents1_amount, 
			tradeInfoTab.agents2_amount, 
			tradeInfoTab.agents3_amount, 
			tradeInfoTab.shopkeeper_amount, 
			tradeInfoTab.alliance_business_amount, 
			tradeInfoTab.back_trade_id, 
			tradeInfoTab.trade_address, 
			tradeInfoTab.trade_zone, 
			tradeInfoTab.trade_city, 
			tradeInfoTab.trade_province, 
			tradeInfoTab.agents1_id, 
			tradeInfoTab.agents2_id, 
			tradeInfoTab.agents3_id, 
			tradeInfoTab.shopkeeper_id, 
			tradeInfoTab.alliance_business_id, 
			tradeInfoTab.create_id, 
			tradeInfoTab.create_datetime, 
			tradeInfoTab.update_datetime, 
			tradeInfoTab.settle_accounts_status,
			
			deviceInfoTab.trade_id, 
			deviceInfoTab.device_id, 
			deviceInfoTab.device_type_id, 
			deviceInfoTab.device_type_name, 
			deviceInfoTab.device_status, 
			deviceInfoTab.online_datetime, 
			deviceInfoTab.online_merchant_id, 
			deviceInfoTab.online_address, 
			deviceInfoTab.online_province, 
			deviceInfoTab.online_x_coordinate, 
			deviceInfoTab.online_y_coordinate, 
			deviceInfoTab.fee_type_id, 
			deviceInfoTab.fee_type_name, 
			deviceInfoTab.yfj_amount, 
			deviceInfoTab.first_amount, 
			deviceInfoTab.first_minutes, 
			deviceInfoTab.amount_per_hour, 
			deviceInfoTab.amount_max_24hour, 
			deviceInfoTab.fee1_type_id, 
			deviceInfoTab.fee1_type_name, 
			deviceInfoTab.fee1_hour_type, 
			deviceInfoTab.fee1_hour_amount, 
			deviceInfoTab.fee2_type_id, 
			deviceInfoTab.fee2_type_name, 
			deviceInfoTab.fee2_hour_type, 
			deviceInfoTab.fee2_hour_amount, 
			deviceInfoTab.fee3_type_id, 
			deviceInfoTab.fee3_type_name, 
			deviceInfoTab.fee3_hour_type, 
			deviceInfoTab.fee3_hour_aount, 
			deviceInfoTab.platform_rato, 
			deviceInfoTab.agents1_cn, 
			deviceInfoTab.agents1_rato,
			deviceInfoTab.agents2_cn, 
			deviceInfoTab.agents2_rato, 
			deviceInfoTab.agents3_rato, 
			deviceInfoTab.agents3_cn, 
			deviceInfoTab.shopkeeper_cn, 
			deviceInfoTab.shopkeeper_rato, 
			deviceInfoTab.alliance_business_cn, 
			deviceInfoTab.alliance_business_rate, 
			deviceInfoTab.trade_yfj_amount, 
			deviceInfoTab.trade_cust_no, 
			deviceInfoTab.SQR_url, 
			deviceInfoTab.remark, 
			deviceInfoTab.yfj_reback_type, 
			deviceInfoTab.trade_fee_type_id,
			tradeInfoTab.merchant_id, 
			
			merchantInfoTab.`name` AS terminalMerName,
			merchantInfoTab.`addr` AS terminalMerAddr,
			merchantInfoTab.`person_name` AS terminalPersonName,
			merchantInfoTab.`tel_no` AS terminalTelNo
		FROM `share_trade_info` AS tradeInfoTab
		JOIN `share_trade_device_info` AS deviceInfoTab ON tradeInfoTab.`id`=deviceInfoTab.`trade_id`
		LEFT JOIN `merchant_info` AS merchantInfoTab ON merchantInfoTab.`id`=tradeInfoTab.`merchant_id`
        WHERE 1=1 
		<if test="deviceId !=null">
			and tradeInfoTab.device_no=#{deviceId,jdbcType=BIGINT}
		</if>
		<if test="agents1Id !=null">
			and tradeInfoTab.agents1_id=#{agents1Id,jdbcType=BIGINT}
		</if>
		<if test="agents2Id !=null">
			and tradeInfoTab.agents2_id=#{agents2Id,jdbcType=BIGINT}
		</if>
		<if test="agents3Id !=null">
			and tradeInfoTab.agents3_id=#{agents3Id,jdbcType=BIGINT}
		</if>
		<if test="shopkeeperId !=null">
			and tradeInfoTab.shopkeeper_id=#{shopkeeperId,jdbcType=BIGINT}
		</if>
		<if test="allianceBusinessId !=null">
			and tradeInfoTab.alliance_business_id=#{allianceBusinessId,jdbcType=BIGINT}
		</if>
		<if test="merchantId !=null">
			and tradeInfoTab.merchant_id=#{merchantId,jdbcType=BIGINT}
		</if>
		<if test="tradeStatus !=null">
			and tradeInfoTab.trade_status=#{tradeStatus,jdbcType=BIGINT}
		</if>
		<if test="beginDateTime != null">
			<![CDATA[ 
			    and str_to_date(CONCAT(#{beginDateTime},' 00:00:00'),'%Y-%m-%d %H:%i:%s') <= tradeInfoTab.create_datetime
	    	]]>
		</if>
		<if test="endDateTime != null">
			<![CDATA[ 
			and STR_TO_DATE(CONCAT(#{endDateTime},' 23:59:59'),'%Y-%m-%d %H:%i:%s') >= tradeInfoTab.create_datetime
	    	]]>
		</if>
		<if test="beginBackDateTime != null">
			<![CDATA[ 
			    and str_to_date(CONCAT(#{beginBackDateTime},' 00:00:00'),'%Y-%m-%d %H:%i:%s') <= tradeInfoTab.back_datetime
	    	]]>
		</if>
		<if test="endBackDateTime != null">
			<![CDATA[ 
			and STR_TO_DATE(CONCAT(#{endBackDateTime},' 23:59:59'),'%Y-%m-%d %H:%i:%s') >= tradeInfoTab.back_datetime
	    	]]>
		</if>
        ORDER BY tradeInfoTab.create_datetime DESC
        LIMIT #{start,jdbcType=INTEGER},#{rows,jdbcType=INTEGER}
  </select>  
  <resultMap id="queryMerTradeCountAndAmtResultMap" type="com.stylefeng.guns.sharecore.modular.system.model.ShareTrdTotalInfo">
  	<result column="tradeCount" jdbcType="INTEGER" property="tradeCount" />
  	<result column="tradeAmount" jdbcType="DECIMAL" property="totalTradeAmt" />
  	<result column="agents1Amount" jdbcType="DECIMAL" property="agents1Amount" />
  	<result column="agents2Amount" jdbcType="DECIMAL" property="agents2Amount" />
  	<result column="agents3Amount" jdbcType="DECIMAL" property="agents3Amount" />
  	<result column="shopkeeperAmount" jdbcType="DECIMAL" property="shopkeeperAmount" />
  	<result column="allianceBusinessAmount" jdbcType="DECIMAL" property="allianceBusinessAmount" />
  </resultMap>
  <select id="countMerchantOrdersForPageByFilter" parameterType="java.util.HashMap" resultMap="queryMerTradeCountAndAmtResultMap">
  	  SELECT 
    	COUNT(tradeInfoTab.`id`) as tradeCount,
    	SUM(tradeInfoTab.`trade_amount`) as tradeAmount,
		SUM(tradeInfoTab.`agents1_amount`) AS agents1Amount,
		SUM(tradeInfoTab.`agents2_amount`) AS agents2Amount,
		SUM(tradeInfoTab.`agents3_amount`) AS agents3Amount,
		SUM(tradeInfoTab.`shopkeeper_amount`) AS shopkeeperAmount,
		SUM(tradeInfoTab.`alliance_business_amount`) AS allianceBusinessAmount
  	  FROM share_trade_info tradeInfoTab 
  	  WHERE 1=1 
		<if test="deviceId !=null">
			and tradeInfoTab.device_no=#{deviceId}
		</if>
		<if test="agents1Id !=null">
			and tradeInfoTab.agents1_id=#{agents1Id,jdbcType=BIGINT}
		</if>
		<if test="agents2Id !=null">
			and tradeInfoTab.agents2_id=#{agents2Id,jdbcType=BIGINT}
		</if>
		<if test="agents3Id !=null">
			and tradeInfoTab.agents3_id=#{agents3Id,jdbcType=BIGINT}
		</if>
		<if test="shopkeeperId !=null">
			and tradeInfoTab.shopkeeper_id=#{shopkeeperId,jdbcType=BIGINT}
		</if>
		<if test="allianceBusinessId !=null">
			and tradeInfoTab.alliance_business_id=#{allianceBusinessId,jdbcType=BIGINT}
		</if>
		<if test="merchantId !=null">
			and tradeInfoTab.merchant_id=#{merchantId,jdbcType=BIGINT}
		</if>
		<if test="tradeStatus !=null">
			and tradeInfoTab.trade_status=#{tradeStatus,jdbcType=BIGINT}
		</if>
		<if test="beginDateTime != null">
			<![CDATA[ 
			    and str_to_date(CONCAT(#{beginDateTime},' 00:00:00'),'%Y-%m-%d %H:%i:%s') <= tradeInfoTab.create_datetime
	    	]]>
		</if>
		<if test="endDateTime != null">
			<![CDATA[ 
			and STR_TO_DATE(CONCAT(#{endDateTime},' 23:59:59'),'%Y-%m-%d %H:%i:%s') >= tradeInfoTab.create_datetime
	    	]]>
		</if>
		<if test="beginBackDateTime != null">
			<![CDATA[ 
			    and str_to_date(CONCAT(#{beginBackDateTime},' 00:00:00'),'%Y-%m-%d %H:%i:%s') <= tradeInfoTab.back_datetime
	    	]]>
		</if>
		<if test="endBackDateTime != null">
			<![CDATA[ 
			and STR_TO_DATE(CONCAT(#{endBackDateTime},' 23:59:59'),'%Y-%m-%d %H:%i:%s') >= tradeInfoTab.back_datetime
	    	]]>
		</if>
  </select>
  <resultMap id="WithdrawTradeInfoModelResultMap" type="com.stylefeng.guns.sharecore.modular.system.model.WithdrawTradeInfoModel">
    <id column="trade_id" property="tradeId" jdbcType="BIGINT" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="status" property="status" jdbcType="TINYINT" />
    <result column="STATUS_CN" property="statusCn" jdbcType="VARCHAR" />
    <result column="return_code" property="returnCode" jdbcType="VARCHAR" />
    <result column="return_msg" property="returnMsg" jdbcType="VARCHAR" />   
    <result column="trade_name" property="tradeName" jdbcType="VARCHAR" />
    <result column="cust_no" property="custNo" jdbcType="BIGINT" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="trade_amount" property="tradeAmount" jdbcType="DECIMAL" />
    <result column="trade_type" property="tradeType" jdbcType="TINYINT" /> 
    <result column="bank_recv_time" property="bankRecvTime" jdbcType="TIMESTAMP" />
    <result column="check_date" property="checkDate" jdbcType="DATE" />
    <result column="recon_status" property="reconStatus" jdbcType="TINYINT" />
    <result column="jifen_amt" property="jifenAmt" jdbcType="DECIMAL" />
  </resultMap>
  <select id="selectWithdrawForPage" parameterType="com.stylefeng.guns.sharecore.modular.system.model.WithdrawTradeInfoModel" resultMap="WithdrawTradeInfoModelResultMap">
	SELECT 
	       trade_id,
	       STATUS,
	       status_cn,
	       trade_type,
	       trade_name,
	       create_time,
	       trade_amount,
	       cust_no 
	FROM `recharge_trade_info`
	WHERE cust_no = #{custNo,jdbcType=BIGINT}     
	UNION 
	SELECT 
	   trade_id,
	       STATUS,
	       status_cn,
	       trade_type,
	       trade_name,
	       create_time,
	       trade_amount,
	       cust_no 
	FROM withdraw_trade_info
	WHERE cust_no = #{custNo,jdbcType=BIGINT}    
	ORDER BY create_time DESC
	LIMIT #{start,jdbcType=INTEGER},#{rows,jdbcType=INTEGER}     
  </select>
  <resultMap id="WthdrawItemListResultMap"  type="com.stylefeng.guns.sharecore.modular.system.model.WithdrawBO">
    <result column="recv_bank" jdbcType="VARCHAR" property="refundBank" />
    <result column="withdraw_amt" jdbcType="DECIMAL" property="withdrawAmt" />
    <result column="recon_status" jdbcType="TINYINT" property="reconStatus" />
    <result column="out_trade_no" jdbcType="BIGINT" property="outTradeId" />
    <result column="record_id" jdbcType="BIGINT" property="recordId" />
    <result column="bank_recv_time" jdbcType="TIMESTAMP" property="bankRecvTime" />
  </resultMap>
  <select id="getWithdrawItemList" resultMap="WthdrawItemListResultMap"  >
	SELECT
	  chcr.record_id,
   	  chcr.recon_status,
	  chcr.out_trade_no,
	  chcr.recv_bank,
	  chcr.total_fee as withdraw_amt,
	  chcr.time_end as bank_recv_time
    FROM channel_capital_record chcr  
    WHERE chcr.trade_record_id = #{0,jdbcType=BIGINT} 
    	AND chcr.`trade_type`='93'
  </select>  
  <select id="getMustBackTradeOrders"  resultType="java.lang.Long">
	SELECT t.`id`
	FROM share_trade_info  t
	WHERE   t.`trade_status`=10 
	<![CDATA[ 
	 AND (t.`borrow_datetime`<=DATE_ADD(NOW(), INTERVAL -24 HOUR) OR (t.`trade_type`<25 AND t.`borrow_datetime`<= DATE_ADD(NOW(), INTERVAL -1*t.`trade_type` HOUR)))
	]]>
  </select>  
  <select id="getMustBenefitTradeOrders"  resultType="java.lang.Long">
	SELECT t.`id` FROM share_trade_info  t
	WHERE   (t.`trade_status`=11 OR t.`trade_status`=13 )
	 AND t.`benefit_status`=0
	LIMIT 0,100
  </select>   
</mapper>